process {

    cpus = { 1  * task.attempt }
    memory = { 6.GB * task.attempt }
    time = { 4.h  * task.attempt }

    errorStrategy = { task.exitStatus in [143,137,104,134,139] ? 'retry' : 'finish' }

    maxRetries    = 1
    maxErrors     = '-1'
    resourceLimits = [ memory: 256.GB, cpus: 32, time: 72.h ]

    withLabel:process_single {
        cpus   = { 1 }
        memory = { 6.GB * task.attempt }
        time   = { 4.h  * task.attempt }
    }

    withLabel:process_low {
        cpus   = { 2    * task.attempt }
        memory = { 12.GB * task.attempt }
        time   = { 4.h  * task.attempt }
    }

    withLabel:process_medium {
        cpus   = { 6    * task.attempt }
        memory = { 36.GB * task.attempt }
        time   = { 8.h  * task.attempt }
    }

    withLabel:process_high {
        cpus   = { 12   * task.attempt }
        memory = { 72.GB * task.attempt }
        time   = { 16.h * task.attempt }
    }
}
